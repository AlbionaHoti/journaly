# Migration `20200610190842-optionalize-some-user-fields`

This migration has been generated by Ryan "Lanny" Jenkins at 6/10/2020, 7:08:42 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."Post" ALTER COLUMN "status" SET DEFAULT 'DRAFT';

ALTER TABLE "public"."User" DROP CONSTRAINT IF EXiSTS "User_locationId_fkey",
ALTER COLUMN "locationId" DROP NOT NULL,
ALTER COLUMN "name" DROP NOT NULL,
ALTER COLUMN "userRole" SET DEFAULT 'FREE_USER';

ALTER TABLE "public"."User" ADD FOREIGN KEY ("locationId")REFERENCES "public"."Location"("id") ON DELETE SET NULL  ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200610133356-initial..20200610190842-optionalize-some-user-fields
--- datamodel.dml
+++ datamodel.dml
@@ -1,16 +1,16 @@
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url      = "postgresql://jlyuser:jlypass@localhost:5433/jlydb"
 }
 generator prisma_client {
   provider = "prisma-client-js"
 }
 model User {
   id                Int                @default(autoincrement()) @id
-  name              String
+  name              String?
   email             String             @unique
   handle            String             @unique
   auth              Auth
   userRole          UserRole           @default(FREE_USER)
@@ -18,10 +18,10 @@
   posts             Post[]
   subscription      UserSubscription?
   socialMedia       SocialMedia[]
   interests         Topic[]
-  location          Location           @relation(fields: [locationId], references: [id])
-  locationId        Int
+  location          Location?          @relation(fields: [locationId], references: [id])
+  locationId        Int?
   languagesNative   LanguageNative[]
   languagesLearning LanguageLearning[]
   createdAt         DateTime           @default(now())
   updatedAt         DateTime           @updatedAt
```
