datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator prisma_client {
  provider = "prisma-client-js"
}

model User {
  Id               String   @id @default(cuid())
  Name             String
  Email            String   @unique
  Password         String
  ResetToken       String?
  ResetTokenExpiry Float?
  userRole         UserRole @default(FREE_USER)
  posts            Post[]
  CreatedAt        DateTime @default(now())
  UpdatedAt        DateTime @updatedAt
  profile          Profile
}

model Post {
  Id         String     @id @default(cuid())
  Title      String
  Body       String
  status     PostStatus @default(DRAFT)
  Image      String?
  LargeImage String?
  CreatedAt  DateTime   @default(now())
  UpdatedAt  DateTime   @updatedAt
  author     User
  ReadCount  Int        @default(0)
  likes      Like[]
  comments   Comment[]
  ReadTime   Int
  tags       Tag[]
  language   Language
  location   Location
}

model Location {
  Id        String  @id @default(cuid())
  Country   String?
  City      String?
  Longitude Float?
  Latitude  Float?
}

model Topic {
  Id    String @id @default(cuid())
  Name  String
  posts Post[]
}

model Tag {
  Id    String @id @default(cuid())
  Name  String
  posts Post[]
}

model Like {
  Id     String @id @default(cuid())
  Body   String
  author User
}

model Comment {
  Id       String @id @default(cuid())
  Body     String
  Position String
  author   User
  post     Post
}

model Profile {
  Id              String     @id @default(cuid())
  Handle          String     @unique
  Bio             String
  user            User
  SocialMedia     String[]
  location        Location
  interests       Interest[]
  languagesNative Language[] @relation("relationA")
  // languagesLearning Language[]
}

model Interest {
  Id    String @id @default(cuid())
  Name  String
  posts Post[]
}

model Language {
  Id      String  @id @default(cuid())
  posts   Post[]
  Name    String
  Dialect String?
}

enum UserRole {
  ADMIN MODERATOR FREE_USER PRO_USER
}

enum PostStatus {
  DRAFT PUBLISHED
}
