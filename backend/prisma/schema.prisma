datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator prisma_client {
  provider = "prisma-client-js"
}

model User {
  Id                String        @id @default(cuid())
  Name              String
  Email             String        @unique
  Password          String
  ResetToken        String?
  ResetTokenExpiry  Float?
  userRole          UserRole      @default(FREE_USER)
  CreatedAt         DateTime      @default(now())
  UpdatedAt         DateTime      @updatedAt
  Handle            String        @unique
  Bio               String
  SocialMedia       SocialMedia[]
  interests         Topic[]
  location          Location?
  languagesNative   Language[]    @relation("LanguageToNative")
  languagesLearning Language[]    @relation("LanguageToLearner")
}

model SocialMedia {
  Id       String              @id @default(cuid())
  Platform SocialMediaPlatform
}

model Post {
  Id         String     @id @default(cuid())
  Title      String
  Body       String
  status     PostStatus @default(DRAFT)
  Image      String?
  LargeImage String?
  CreatedAt  DateTime   @default(now())
  UpdatedAt  DateTime   @updatedAt
  author     User
  ReadCount  Int        @default(0)
  ReadTime   Int
  likes      Like[]
  comments   Comment[]
  tags       Tag[]
  topic      Topic[]
  language   Language
  Longitude  Float?
  Latitude   Float?
}

model Location {
  Id      String @id @default(cuid())
  Country String
  City    String
}

model Topic {
  Id    String @id @default(cuid())
  Name  String
  posts Post[]
}

model Tag {
  Id    String @id @default(cuid())
  Name  String
  posts Post[]
}

model Like {
  Id        String   @id @default(cuid())
  CreatedAt DateTime @default(now())
  UpdatedAt DateTime @updatedAt
  author    User
  post      Post
}

model Comment {
  Id        String   @id @default(cuid())
  CreatedAt DateTime @default(now())
  UpdatedAt DateTime @updatedAt
  Body      String
  Position  String
  author    User
  post      Post
}

model Interest {
  Id    String @id @default(cuid())
  Name  String
  posts Post[]
}

model Language {
  Id            String  @id @default(cuid())
  posts         Post[]
  Name          String
  Dialect       String?
  nativeUsers   User    @relation("LanguageToNative")
  learningUsers User    @relation("LanguageToLearner")
}

enum UserRole {
  ADMIN MODERATOR FREE_USER PRO_USER
}

enum PostStatus {
  DRAFT PUBLISHED
}

enum SocialMediaPlatform {
  FACEBOOK YOUTUBE INSTAGRAM LINKEDIN
}
